<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Background Remover</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤ -->
    <div id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <h3>–Ø–Ω–¥–µ–∫—Å –î–∏—Å–∫</h3>
            <button id="closeSidebar" class="btn-close">√ó</button>
        </div>
        <div class="sidebar-content">
            <div id="sidebarAccountInfo" class="sidebar-account-info" style="display: none;">
                <div class="account-info-item">
                    <span class="account-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</span>
                    <span id="accountDisplayName" class="account-value">-</span>
                </div>
                <div class="account-info-item">
                    <span class="account-label">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ:</span>
                    <span id="accountUsedSpace" class="account-value">-</span>
                </div>
            </div>
            <div id="sidebarLoading" class="sidebar-loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            <div id="sidebarFiles" class="sidebar-files"></div>
        </div>
    </div>
    
    <div id="sidebarOverlay" class="sidebar-overlay"></div>
    
    <div class="crt-screen">
        <div class="container">
            <header class="header">
                <h1 class="title">Background Remover</h1>
                <div class="subtitle">v2.0.0</div>
            </header>

            <div class="main-content">
                <!-- –ü–∞–Ω–µ–ª—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ -->
                <div class="config-panel">
                    <div class="config-section">
                        <label class="label">–ú–æ–¥–µ–ª—å API:</label>
                        <select id="modelSelect" class="select">
                            <option value="removebg">Remove.bg</option>
                            <option value="clipdrop">Clipdrop</option>
                            <option value="replicate" selected>Replicate</option>
                            <option value="fal">FAL</option>
                            <option value="fal_object_removal">Object Removal FAL AI</option>
                        </select>
                    </div>
                    <div class="config-section">
                        <label class="label">–†–∞–∑–º–µ—Ä –≤—ã–≤–æ–¥–∞:</label>
                        <div class="slider-container">
                            <div class="slider-item">
                                <label class="slider-label">–®–∏—Ä–∏–Ω–∞: <span id="widthValue">1200</span>px</label>
                                <input type="range" id="widthSlider" class="slider" min="500" max="3000" value="1200" step="50">
                            </div>
                            <div class="slider-item">
                                <label class="slider-label">–í—ã—Å–æ—Ç–∞: <span id="heightValue">1200</span>px</label>
                                <input type="range" id="heightSlider" class="slider" min="500" max="3000" value="1200" step="50">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –ü–∞–Ω–µ–ª—å –Ø–Ω–¥–µ–∫—Å –î–∏—Å–∫–∞ -->
                <div class="yandex-panel">
                    <h2 class="panel-title">–Ø–Ω–¥–µ–∫—Å –î–∏—Å–∫</h2>
                    <div class="config-section" style="margin-bottom: 16px;">
                        <label class="label">URL –ø–∞–ø–∫–∏:</label>
                        <input type="text" id="yandexUrlInput" class="input" placeholder="https://disk.yandex.ru/d/-uXMLsCHrFtxzg" value="https://disk.yandex.ru/client/disk/–¢–µ—Å—Ç –∫–æ–º—Ç–µ—Ö">
                        <button id="loadYandexFilesBtn" class="btn btn-small">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã</button>
                    </div>
                    <button id="openSidebarBtn" class="btn">–û—Ç–∫—Ä—ã—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤</button>
                    <div id="batchProgress" class="progress-container" style="display: none; margin-top: 16px;">
                        <div class="progress-bar">
                            <div id="progressFill" class="progress-fill"></div>
                        </div>
                        <div id="progressText" class="progress-text">0 / 0</div>
                    </div>
                </div>

                <!-- –î–≤–∞ –æ–∫–Ω–∞ –¥–ª—è —Ñ–æ—Ç–æ -->
                <div class="windows-container">
                    <!-- –õ–µ–≤–æ–µ –æ–∫–Ω–æ - Upload -->
                    <div class="window window-upload">
                        <div class="window-header">
                            <span class="window-title">–ó–ê–ì–†–£–ó–ö–ê</span>
                        </div>
                        <div class="window-content">
                            <div id="uploadArea" class="upload-area">
                                <div class="upload-placeholder">
                                    <div class="upload-icon">üìÅ</div>
                                    <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–æ—Ç–æ —Å—é–¥–∞</p>
                                    <p class="upload-hint">–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞</p>
                                </div>
                                <input type="file" id="fileInput" accept="image/*" style="display: none;">
                            </div>
                            <div id="uploadPreview" class="preview-container" style="display: none;">
                                <img id="uploadImage" class="preview-image" alt="–ó–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ —Ñ–æ—Ç–æ">
                                <button id="removeImageBtn" class="btn btn-small">–£–¥–∞–ª–∏—Ç—å</button>
                            </div>
                            <button id="processBtn" class="btn btn-primary" style="display: none;">–û–±—Ä–∞–±–æ—Ç–∞—Ç—å</button>
                            <div id="imageDimensions" class="image-dimensions" style="display: none;"></div>
                        </div>
                    </div>

                    <!-- –ü—Ä–∞–≤–æ–µ –æ–∫–Ω–æ - Processed -->
                    <div class="window window-processed">
                        <div class="window-header">
                            <span class="window-title">–û–ë–†–ê–ë–û–¢–ö–ê</span>
                        </div>
                        <div class="window-content">
                            <div id="processedPreview" class="preview-container">
                                <img id="processedImage" class="preview-image" style="display: none;" alt="–û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ —Ñ–æ—Ç–æ">
                            </div>
                            <div id="loadingIndicator" class="loading" style="display: none;">
                                <div class="spinner"></div>
                                <p>–û–±—Ä–∞–±–æ—Ç–∫–∞...</p>
                            </div>
                            <button id="downloadBtn" class="btn btn-primary" style="display: none;">–°–∫–∞—á–∞—Ç—å</button>
                            <button id="changeResolutionBtn" class="btn btn-secondary" style="display: none;">–ü–æ—Å—Ç–∞–≤—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ 1200 –Ω–∞ 1600</button>
                            <div id="processedImageDimensions" class="image-dimensions" style="display: none;"></div>
                        </div>
                    </div>
                    
                    <!-- –¢—Ä–µ—Ç—å–µ –æ–∫–Ω–æ - Place on Background -->
                    <div class="window window-background">
                        <div class="window-header">
                            <span class="window-title">–§–û–ù</span>
                        </div>
                        <div class="window-content">
                            <div id="backgroundPreview" class="preview-container">
                                <div class="placeholder-text" id="backgroundPlaceholder">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ —Ñ–æ–Ω–µ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å</div>
                                <img id="backgroundImage" class="preview-image" style="display: none;" alt="–§–æ—Ç–æ –Ω–∞ —Ñ–æ–Ω–µ">
                            </div>
                            <div id="backgroundLoadingIndicator" class="loading" style="display: none;">
                                <div class="spinner"></div>
                                <p>–†–∞–∑–º–µ—â–µ–Ω–∏–µ –Ω–∞ —Ñ–æ–Ω–µ...</p>
                            </div>
                            <div id="promptEditor" style="display: none; width: 100%; margin-bottom: 16px;">
                                <label style="display: block; margin-bottom: 8px; color: var(--text-color); font-weight: 600; font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px;">–ü—Ä–æ–º–ø—Ç –¥–ª—è AI:</label>
                                <textarea id="backgroundPrompt" class="input" rows="8" style="width: 100%; font-family: 'Inter', sans-serif; resize: vertical; min-height: 120px;"></textarea>
                            </div>
                            <button id="placeOnBackgroundBtn" class="btn btn-primary" style="display: none;">–†–∞–∑–º–µ—Å—Ç–∏—Ç—å –Ω–∞ —Ñ–æ–Ω–µ</button>
                            <button id="downloadBackgroundBtn" class="btn btn-primary" style="display: none;">–°–∫–∞—á–∞—Ç—å</button>
                            <div id="backgroundImageDimensions" class="image-dimensions" style="display: none;"></div>
                        </div>
                    </div>
                    
                </div>
                    
                    <!-- –ß–µ—Ç–≤–µ—Ä—Ç–æ–µ –æ–∫–Ω–æ - Batch Processing (full width) -->
                    <div class="window window-batch" style="width: 100%; max-width: 100%; margin-top: 20px;">
                        <div class="window-header">
                            <span class="window-title">–ü–ê–ö–ï–¢–ù–ê–Ø –û–ë–†–ê–ë–û–¢–ö–ê</span>
                        </div>
                        <div class="window-content">
                            <div class="batch-info">
                                <p style="margin-bottom: 16px; color: var(--text-color); font-size: 14px;">
                                    –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –ø–∞–ø–∫–∏ –Ω–∞ –Ø–Ω–¥–µ–∫—Å –î–∏—Å–∫–µ.<br>
                                    –í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–ø–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä: –¢–µ—Å—Ç –∫–æ–º—Ç–µ—Ö).<br>
                                    –í—Å–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏–∑ –ø–∞–ø–∫–∏ –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –Ω–∞ –±–µ–ª—ã–π —Ñ–æ–Ω —Å –∑–∞–¥–∞–Ω–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º.<br>
                                    –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–ø–∫—É [–Ω–∞–∑–≤–∞–Ω–∏–µ_–ø–∞–ø–∫–∏]_–û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π.<br>
                                    –î–ª—è –ø–µ—Ä–≤–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤–µ—Ä—Å–∏—è —Å –¥–∏–∑–∞–π–Ω–æ–º (—Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –Ω–∞ —Ñ–æ–Ω–µ).<br>
                                    –í—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ –Ø–Ω–¥–µ–∫—Å –î–∏—Å–∫.
                                </p>
                            </div>
                            <div class="config-section" style="margin-bottom: 16px; flex-direction: column; align-items: flex-start;">
                                <label class="label">–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å –Ω–∞ –Ø–Ω–¥–µ–∫—Å –î–∏—Å–∫–µ:</label>
                                <div style="display: flex; gap: 8px; align-items: center; width: 100%;">
                                    <select id="batchBasePathSelect" class="select" style="flex: 1; min-height: 40px;">
                                        <option value="">–ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞–ø–æ–∫...</option>
                                    </select>
                                    <button type="button" id="refreshFoldersBtn" class="button" style="padding: 8px 16px; white-space: nowrap; min-width: 50px;" title="–û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–∞–ø–æ–∫">
                                        üîÑ
                                    </button>
                                </div>
                                <input type="text" id="batchBasePathInput" class="input" placeholder="–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ URL/–ø—É—Ç—å –≤—Ä—É—á–Ω—É—é" style="margin-top: 8px; display: none; width: 100%;">
                                <small style="color: var(--text-color); opacity: 0.7; display: block; margin-top: 8px;">
                                    <span id="foldersCount" style="font-weight: 500;">–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–ø–∫—É –∏–∑ —Å–ø–∏—Å–∫–∞</span> (—Å–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã) –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ URL/–ø—É—Ç—å –≤—Ä—É—á–Ω—É—é
                                </small>
                            </div>
                            <div class="config-section" style="margin-bottom: 16px;">
                                <label class="label">–ú–æ–¥–µ–ª—å –æ–±—Ä–∞–±–æ—Ç–∫–∏:</label>
                                <select id="batchModelSelect" class="select">
                                    <option value="removebg">Remove.bg</option>
                                    <option value="clipdrop">Clipdrop</option>
                                    <option value="replicate" selected>Replicate</option>
                                    <option value="fal">FAL</option>
                                    <option value="fal_object_removal">Object Removal FAL AI</option>
                                </select>
                            </div>
                            <div class="config-section" style="margin-bottom: 16px;">
                                <label class="label">–†–∞–∑–º–µ—Ä –≤—ã—Ö–æ–¥–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:</label>
                                <div style="display: flex; gap: 12px;">
                                    <div style="flex: 1;">
                                        <label style="font-size: 12px; display: block; margin-bottom: 4px;">–®–∏—Ä–∏–Ω–∞:</label>
                                        <input type="number" id="batchWidthInput" class="input" value="1200" min="100" max="5000" step="50">
                                    </div>
                                    <div style="flex: 1;">
                                        <label style="font-size: 12px; display: block; margin-bottom: 4px;">–í—ã—Å–æ—Ç–∞:</label>
                                        <input type="number" id="batchHeightInput" class="input" value="1200" min="100" max="5000" step="50">
                                    </div>
                                </div>
                            </div>
                            <div class="config-section" style="margin-bottom: 16px; display: none;">
                                <label class="label">–ü–∞–ø–∫–∞ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:</label>
                                <input type="text" id="batchOutputFolderInput" class="input" value="" placeholder="">
                                <small style="color: var(--text-color); opacity: 0.7; display: block; margin-top: 4px;">–ù–∞–∑–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: [–ò–º—è_–ø–∞–ø–∫–∏]_–û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π</small>
                            </div>
                            <div style="display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; align-items: center;">
                                <button id="startBatchProcessBtn" class="btn btn-primary" style="flex: 1; min-width: 200px;">–ù–∞—á–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–∞–ø–æ–∫</button>
                                <button id="stopBatchProcessBtn" class="btn" style="display: none; background: var(--error-color); min-width: 140px;">‚èπ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                                <button id="continueBatchProcessBtn" class="btn" style="display: none; background: var(--success-color); min-width: 140px;">‚ñ∂ –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
                            </div>
                            <div id="batchLoadingIndicator" class="loading" style="display: none; margin-top: 16px;">
                                <div class="spinner"></div>
                                <p>–û–±—Ä–∞–±–æ—Ç–∫–∞...</p>
                            </div>
                            <div id="batchProgressContainer" class="progress-container" style="display: none; margin-top: 16px;">
                                <div class="progress-bar">
                                    <div id="batchProgressFill" class="progress-fill"></div>
                                </div>
                                <div id="batchProgressText" class="progress-text">0 / 0</div>
                            </div>
                            <div id="batchProgressDetails" style="display: none; margin-top: 16px; background: rgba(0,0,0,0.2); padding: 12px; border-radius: 4px; max-height: 300px; overflow-y: auto;">
                                <h4 style="color: var(--text-color); margin: 0 0 8px 0; font-size: 14px;">–¢–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:</h4>
                                <div id="batchProgressDetailsContent" style="color: var(--text-color); font-size: 12px; line-height: 1.6;">
                                    <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ -->
                                </div>
                            </div>
                            <div id="batchResults" style="display: none; margin-top: 16px;">
                                <h3 style="color: var(--text-color); margin-bottom: 8px;">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:</h3>
                                <div id="batchResultsContent" style="max-height: 400px; overflow-y: auto; background: rgba(0,0,0,0.2); padding: 12px; border-radius: 4px;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="errorMessage" class="error-message" style="display: none;"></div>
        </div>
    </div>

    <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è API –∫–ª—é—á–∞–º–∏ (–ø—Ä–∞–≤—ã–π –Ω–∏–∂–Ω–∏–π —É–≥–æ–ª) -->
    <div id="apiKeysPanel" class="api-keys-panel collapsed">
        <div class="api-keys-header" id="apiKeysToggle">
            <span>üîë API –ö–ª—é—á–∏</span>
            <span class="api-keys-arrow">‚ñº</span>
        </div>
        <div class="api-keys-content" id="apiKeysContent">
            <div class="api-key-item">
                <label class="api-key-label">Remove.bg:</label>
                <input type="password" id="apiKeyRemovebg" class="api-key-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á">
                <button class="api-key-save" data-model="removebg">üíæ</button>
            </div>
            <div class="api-key-item">
                <label class="api-key-label">Clipdrop:</label>
                <input type="password" id="apiKeyClipdrop" class="api-key-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á">
                <button class="api-key-save" data-model="clipdrop">üíæ</button>
            </div>
            <div class="api-key-item">
                <label class="api-key-label">Replicate:</label>
                <input type="password" id="apiKeyReplicate" class="api-key-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á">
                <button class="api-key-save" data-model="replicate">üíæ</button>
            </div>
            <div class="api-key-item">
                <label class="api-key-label">FAL:</label>
                <input type="password" id="apiKeyFal" class="api-key-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á">
                <button class="api-key-save" data-model="fal">üíæ</button>
            </div>
            <div class="api-key-item">
                <label class="api-key-label">Object Removal FAL AI:</label>
                <input type="password" id="apiKeyFalObjectRemoval" class="api-key-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á">
                <button class="api-key-save" data-model="fal_object_removal">üíæ</button>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>

